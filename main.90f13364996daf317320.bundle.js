(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{301:function(module,exports,__webpack_require__){__webpack_require__(302),__webpack_require__(454),__webpack_require__(455),module.exports=__webpack_require__(646)},368:function(module,exports){},455:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(238)},646:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(238).configure)([__webpack_require__(647)],module,!1)}).call(this,__webpack_require__(84)(module))},647:function(module,exports,__webpack_require__){var map={"./stories/0-Home.stories.tsx":648};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=647},648:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"Basic",(function(){return _0_Home_stories_Basic}));var slicedToArray=__webpack_require__(126),react=__webpack_require__(13),react_default=__webpack_require__.n(react),toConsumableArray=__webpack_require__(127),toArray=__webpack_require__(191),objectSpread2=__webpack_require__(300),UNDO="USE_HISTORY_REDUCER_UNDO",REDO="USE_HISTORY_REDUCER_REDO",compareStates=function compareStates(stateA,stateB){return JSON.stringify(stateA)===JSON.stringify(stateB)},ts=function useHistoryReducer(reducer,initialState){var opts=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},_omitUnmodified$opts=Object(objectSpread2.a)({omitUnmodified:!0},opts),omitUnmodified=_omitUnmodified$opts.omitUnmodified,historyState={past:[],present:initialState,future:[]},historyReducer=function historyReducer(state,action){if(action.type===UNDO){var _state$past=Object(toArray.a)(state.past),_newPresent=_state$past[0],_past=_state$past.slice(1);return _newPresent?{past:_past,present:_newPresent,future:[state.present].concat(Object(toConsumableArray.a)(state.future))}:state}if(action.type===REDO){var _state$future=Object(toArray.a)(state.future),_newPresent2=_state$future[0],_future=_state$future.slice(1);return _newPresent2?{past:[state.present].concat(Object(toConsumableArray.a)(state.past)),present:_newPresent2,future:_future}:state}var newPresent=reducer(state.present,action);return omitUnmodified&&compareStates(newPresent,state.present)?state:{past:[state.present].concat(Object(toConsumableArray.a)(state.past)),present:newPresent,future:[]}},_useReducer=Object(react.useReducer)(historyReducer,historyState),_useReducer2=Object(slicedToArray.a)(_useReducer,2),state=_useReducer2[0],dispatch=_useReducer2[1],_ref=state,past=_ref.past,future=_ref.future,present=_ref.present,history={canUndo:past.length>0,canRedo:future.length>0,undo:function undo(){return dispatch({type:UNDO})},redo:function redo(){return dispatch({type:REDO})},past:past,future:future};return[present,dispatch,history]},_0_Home_stories_reducer=(__webpack_exports__.default={parameters:{storySource:{source:"import React, { useReducer } from 'react'\nimport useHistoryReducer from '../ts'\n\nexport default {\n  title: 'Home',\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case 'increment':\n      return { count: state.count + 1 }\n    case 'decrement':\n      return { count: state.count - 1 }\n  }\n}\n\nconst initialState = { count: 0 }\n\nexport const Basic = () => {\n  const [state, dispatch, history] = useHistoryReducer(reducer, initialState, {\n    omitUnmodified: true,\n  })\n\n  return (\n    <div>\n      <div>Count: {state.count}</div>\n      <br />\n      <div>\n        <button onClick={() => dispatch({ type: 'decrement' })}>--</button>{' '}\n        <button onClick={() => dispatch({ type: 'increment' })}>++</button>\n      </div>\n      <br />\n      <div>\n        <button disabled={!history.canUndo} onClick={history.undo}>\n          undo\n        </button>{' '}\n        <button disabled={!history.canRedo} onClick={history.redo}>\n          redo\n        </button>\n      </div>\n    </div>\n  )\n}\n",locationsMap:{basic:{startLoc:{col:21,line:19},endLoc:{col:1,line:43},startBody:{col:21,line:19},endBody:{col:1,line:43}}}}},title:"Home"},function reducer(state,action){switch(action.type){case"increment":return{count:state.count+1};case"decrement":return{count:state.count-1}}}),_0_Home_stories_initialState={count:0},_0_Home_stories_Basic=function Basic(){var _useHistoryReducer=ts(_0_Home_stories_reducer,_0_Home_stories_initialState,{omitUnmodified:!0}),_useHistoryReducer2=Object(slicedToArray.a)(_useHistoryReducer,3),state=_useHistoryReducer2[0],dispatch=_useHistoryReducer2[1],history=_useHistoryReducer2[2];return react_default.a.createElement("div",null,react_default.a.createElement("div",null,"Count: ",state.count),react_default.a.createElement("br",null),react_default.a.createElement("div",null,react_default.a.createElement("button",{onClick:function onClick(){return dispatch({type:"decrement"})}},"--")," ",react_default.a.createElement("button",{onClick:function onClick(){return dispatch({type:"increment"})}},"++")),react_default.a.createElement("br",null),react_default.a.createElement("div",null,react_default.a.createElement("button",{disabled:!history.canUndo,onClick:history.undo},"undo")," ",react_default.a.createElement("button",{disabled:!history.canRedo,onClick:history.redo},"redo")))}}},[[301,1,2]]]);
//# sourceMappingURL=main.90f13364996daf317320.bundle.js.map